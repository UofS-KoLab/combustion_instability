# Model for Detection of Instability

## Objective:
The objective of this repository is to create a model capable of detecting combustion instability in Sustainable Aviation Fuels (SAF). Combustion instability can pose significant risks in aviation, and detecting it accurately is crucial for ensuring safe and efficient operations.

## Dataset:
The main dataset used for training and testing the model is stored in a Google Drive folder accessible via the following link: [Dataset Link]((https://drive.google.com/drive/folders/16OKgQmwzbEZ5R8KgyiA1tDWLs9HAqIzY?usp=drive_link))

### Description of the Dataset:
- The dataset is located in the folder named "Data_09-23".
- It comprises 96 Excel files, each corresponding to a specific set of parameters used during data collection.
- The file named "stability_labeling.xlsx" contains labels for each file, indicating whether the combustion state represented by the data is stable or unstable.
- Each of the 96 files contains data with no headers, structured into three columns:
  1. Time (in seconds)
  2. Pressure
  3. Heat release (PMT)
- The data consists of 120,000 rows, with data sampling taken every 9.77x10^-5 seconds, resulting in a total duration of 12 seconds for each state.

## Test Dataset:
Additionally, there is a test dataset available in the "test_dataset" folder, which contains two Excel files representing collected test data. This dataset can be utilized to evaluate the performance of any model developed using the main dataset.


## Additional Information:
- In the folder named "plots", there are three subfolders with the names of the participants of the project. Each participant can save any plot generated by their code in their respective folder.
- Similarly, the "logs" folder follows the same structure as the "plots" folder, where participants can save any log files generated by their code.
- The "model" folder contains three subfolders with the names of each participant. Participants should upload their code (any Jupyter notebooks or Python scripts) in their respective folders. No additional data should be uploaded to this repository; it's only for code.
- For any new dataset, please DO NOT upload it directly to this repository. Instead, upload it to Google Drive and update this README file with the link to the new dataset. Create a folder (ONLY FOLDER) for the new dataset within the "Dataset" folder, following the same structure as the existing folders.


## Branch Naming Convention:
- Please use the following naming convention when creating branches:
  - Feature branches: `feature/<feature-name>`
  - Bug fix branches: `bugfix/<issue-number>`
  - Hotfix branches: `hotfix/<issue-number>`
  - Release branches: `release/<version-number>`
  - Experiment branches: `experiment/<experiment-name>`
  - Avoid using special characters or spaces in branch names, and use lowercase letters.

---

# üíª LSTM-Based Instability Prediction with FFT Features

## üìå How to Use This Repository

### ‚ö†Ô∏è Data Access
Due to GitHub's file size and privacy limitations, the dataset is **not uploaded to this repository**. However, I have uploaded the data to the shared OneDrive folder previously provided. Please contact me if you need access.

### üìÅ Data Format and Preprocessing
The original dataset is in Excel format. To improve processing speed and make data loading more efficient, I combined the necessary data into a single `.pkl` file. Multiple versions of the dataset are available in the folder data:
- **time_series**
- **fft**

The initial labels used for training are based on a file called `stability_labels`, shared by Professor Bae.

### üñ•Ô∏è Script Execution (Windows)
To simplify script execution, I created a PowerShell script (`.ps1`) to run the Python files and easily adjust arguments. This project was developed and tested on a Windows system. If you're using Linux, you can create a `.sh` file, but note that the Linux version hasn't been updated yet.

---

## üîç Key Scripts and Their Functions

### üìÇ Folder: `src/`

#### `feature_extraction.py`
This script:
- Loads raw sensor data from all samples
- Applies a notch filter
- Segments each signal into windows (e.g., 100ms, 300ms, 500ms)
- Applies FFT on each window to extract:
  - Amplitude
  - Power
  - Phase
- Saves the output as `.pkl` files

**Note**: You can adjust the windowing parameters by modifying the following variables (currently hardcoded, sorry):
- `num_segments_min`
- `num_segments_max`
- `inputs_all`

#### `load_and_preprocess_data.py`
This script:
- Loads the time series data
- Applies the notch filter
- Saves the filtered data as `.pkl`  
It is primarily used for the time-domain LSTM model.

#### `train_fft_model.py`
This script trains an LSTM model using the FFT features. The architecture is simple but effective for this application.

#### `tune_hyperparameters_fft_model.py`
Performs a grid search to find the best hyperparameters for the FFT-based LSTM model. It may take longer to run due to the combinatorial search.

---

### üìÇ Folder: `src_test/`

#### `merge_data.py`
A utility-heavy script that:
- Merges all features used in the analysis
- Filters out specific frequencies (e.g., 0‚Äì5 Hz for PMT)
- Computes additional features such as `norm_sync_score`
- Prepares data for clustering

#### `gmm.py` and `kmeans_clustering.py`
These scripts:
- Load the merged feature file
- Perform clustering (GMM or KMeans)
- Optionally plot the cluster outputs
- Include a post-clustering feature importance estimation method (not a formal importance metric, but a useful heuristic)

---

## üì¨ Contact
If you have any questions or need access to the data, feel free to contact me via email: stephany.valarezo@usask.ca.



Please ensure to review the dataset and folder structure carefully to effectively utilize the provided resources. If you encounter any issues or have questions, feel free to reach out to the repository maintainers (Stephany Valarezo). 

SVP